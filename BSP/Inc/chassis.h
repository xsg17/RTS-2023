/*
*********************************************************************************************************
*                                             INCLUDE FILES
*********************************************************************************************************
*/

#pragma once
#include "includes.h"

/*
*********************************************************************************************************
*                                               EXTERNS
*********************************************************************************************************
*/

#ifdef   CHASSIS_MODULE
#define  CHASSIS_EXT
#else
#define  CHASSIS_EXT  extern
#endif

/*
*********************************************************************************************************
*                                               DEFINES
*********************************************************************************************************
*/
	 
#define WHEELNUM							4

#define CHASSIS_CANSEND						CAN1_Send_Msg

#define CAN_SYNCNODE						4
#define SYNC_CYCLE							10 // 10 ms

/*
*********************************************************************************************************
*                                             EXPORTED_TYPES
*********************************************************************************************************
*/

typedef struct
{
	int32_t Motor_V;		// 0.1 enc counts/sec
	int16_t Motor_Torq;		// rated torque / 1000
	
}Motor_Data;

typedef struct
{
	float x;
	float y;
	float z;

}Point;

typedef struct
{
	float Vx;
	float Vy;
	float Vz;
	
}Velocity;

typedef struct
{
	float a0;
	float a1;
	float a2;
	float a3;
	
}Poly;

typedef struct
{
	Velocity V0;
	Velocity Vf;
	Point start;
	Point end;
	float delT; // s
	
}VTrack;

typedef struct
{
	Poly x;
	Poly y;
	Poly z;
	
}PolyBlock;


/*
*********************************************************************************************************
*                                            GLOBAL VARIABLES
*********************************************************************************************************
*/

CHASSIS_EXT	Motor_Data Mecanum[WHEELNUM+1]; // Index 0 is reserved
CHASSIS_EXT ACC_Net acc_Chassis;

/*
*********************************************************************************************************
*                                           FUNCTION PROTOTYPES
*********************************************************************************************************
*/

void Chassis_Init (void);

/*
*********************************************************************************************************
*                                               MODULE END
*********************************************************************************************************
*/


